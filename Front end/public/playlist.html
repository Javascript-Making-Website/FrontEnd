<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8"/>
  <!-- ë¬¸ì„œì˜ ë¬¸ì ì¸ì½”ë”©ì„ UTF-8ë¡œ ì„¤ì •í•©ë‹ˆë‹¤. í•œê¸€ ë“± ë‹¤êµ­ì–´ ë¬¸ìë¥¼ ì˜¬ë°”ë¥´ê²Œ í‘œì‹œí•˜ê¸° ìœ„í•´ í•„ìš”í•©ë‹ˆë‹¤. -->
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <!-- ë°˜ì‘í˜• í‘œì‹œë¥¼ ìœ„í•´ ë·°í¬íŠ¸ ë©”íƒ€ íƒœê·¸ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. ëª¨ë°”ì¼ í™”ë©´ì—ì„œ í˜ì´ì§€ê°€ í™”ë©´ í­ì— ë§ê²Œ ë Œë”ë§ë©ë‹ˆë‹¤. -->
  <title>Emotion Playlist Â· Playlists</title>
  <!-- ë¸Œë¼ìš°ì € íƒ­ì— í‘œì‹œë  ë¬¸ì„œ ì œëª©ì„ ì§€ì •í•©ë‹ˆë‹¤. -->
  <link rel="stylesheet" href="./assets/styles.css"/>
  <!-- ì™¸ë¶€ ìŠ¤íƒ€ì¼ì‹œíŠ¸(styles.css)ë¥¼ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤. ì´ íŒŒì¼ì€ í˜ì´ì§€ì˜ ì „ë°˜ì ì¸ ìŠ¤íƒ€ì¼ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤. -->
  <style>
    /* ë‚´ ì¬ìƒëª©ë¡ ê°€ë¡œ ìŠ¤í¬ë¡¤ */
    .my-playlists-row {
      display: flex;
      /* ìš”ì†Œë¥¼ ê°€ë¡œë¡œ ë‚˜ì—´í•˜ê¸° ìœ„í•´ flexbox ì»¨í…Œì´ë„ˆë¡œ ë§Œë“­ë‹ˆë‹¤. */
      gap: 16px;
      /* ê° í•­ëª© ì‚¬ì´ì˜ ê°„ê²©ì„ 16í”½ì…€ë¡œ ì„¤ì •í•©ë‹ˆë‹¤. */
      overflow-x: auto;
      /* ê°€ë¡œë¡œ ë„˜ì¹  ê²½ìš° ìŠ¤í¬ë¡¤ì„ í—ˆìš©í•©ë‹ˆë‹¤(ìˆ˜í‰ ìŠ¤í¬ë¡¤). */
      padding: 8px 4px 4px;
      /* ë‚´ë¶€ ì—¬ë°±ì„ ê°ê° ìœ„ 8px, ì¢Œìš° 4px, ì•„ë˜ 4pxë¡œ ì„¤ì •í•©ë‹ˆë‹¤. */
      scrollbar-width: thin;
      /* Firefoxì—ì„œ ìŠ¤í¬ë¡¤ë°” ë„ˆë¹„ë¥¼ ì–‡ê²Œ ë³´ì—¬ë‹¬ë¼ëŠ” íŒíŠ¸ì…ë‹ˆë‹¤. */
    }
    .my-playlists-row::-webkit-scrollbar {
      height: 6px;
      /* WebKit(í¬ë¡¬ ë“±)ì—ì„œ ê°€ë¡œ ìŠ¤í¬ë¡¤ë°”ì˜ ë†’ì´ë¥¼ 6pxë¡œ ì§€ì •í•©ë‹ˆë‹¤. */
    }

    /* ì¬ìƒëª©ë¡ ì¹´ë“œ */
    .pl-card {
      position: relative;
      /* ë‚´ë¶€ì˜ ì ˆëŒ€ ìœ„ì¹˜ ìš”ì†Œ(ì‚­ì œ ë²„íŠ¼ ë“±)ë¥¼ ë°°ì¹˜í•˜ê¸° ìœ„í•´ ìƒëŒ€ ìœ„ì¹˜ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. */
      min-width: 220px;
      /* ì¹´ë“œì˜ ìµœì†Œ ë„ˆë¹„ë¥¼ 220pxë¡œ ì§€ì •í•©ë‹ˆë‹¤. */
      max-width: 220px;
      /* ì¹´ë“œì˜ ìµœëŒ€ ë„ˆë¹„ë¥¼ 220pxë¡œ ê³ ì •í•´ ì¹´ë“œ í¬ê¸°ê°€ ì¼ê´€ë˜ë„ë¡ í•©ë‹ˆë‹¤. */
      background: var(--card);
      /* ì¹´ë“œ ë°°ê²½ìƒ‰ì€ CSS ë³€ìˆ˜ --card ê°’ì„ ì‚¬ìš©í•©ë‹ˆë‹¤(í…Œë§ˆ ëŒ€ì‘). */
      border-radius: 16px;
      /* ëª¨ì„œë¦¬ë¥¼ ë‘¥ê¸€ê²Œ ë§Œë“­ë‹ˆë‹¤(16px ë°˜ê²½). */
      padding: 12px;
      /* ì¹´ë“œ ë‚´ë¶€ ì—¬ë°±ì„ 12pxë¡œ ì„¤ì •í•©ë‹ˆë‹¤. */
      display: flex;
      /* ì¹´ë“œ ë‚´ë¶€ ìš”ì†Œë“¤ì„ ì„¸ë¡œ/ê°€ë¡œ ì •ë ¬ì— í¸ë¦¬í•œ flexë¡œ ë§Œë“­ë‹ˆë‹¤. */
      flex-direction: column;
      /* ë‚´ë¶€ ìš”ì†Œë“¤ì„ ì„¸ë¡œ(ì—´)ë¡œ ë°°ì¹˜í•©ë‹ˆë‹¤. */
      gap: 8px;
      /* ë‚´ë¶€ ìš”ì†Œë“¤ ì‚¬ì´ ê°„ê²©ì„ 8pxë¡œ ì„¤ì •í•©ë‹ˆë‹¤. */
      cursor: pointer;
      /* ì¹´ë“œ ì „ì²´ë¥¼ í´ë¦­ ê°€ëŠ¥í•œ ê²ƒì²˜ëŸ¼ ë³´ì´ê²Œ ë§ˆìš°ìŠ¤ í¬ì¸í„°ë¥¼ ë³€ê²½í•©ë‹ˆë‹¤. */
      transition: transform .15s ease, box-shadow .15s ease;
      /* í˜¸ë²„ ì‹œ ë³€í˜• ì• ë‹ˆë©”ì´ì…˜ì„ ë¶€ë“œëŸ½ê²Œ ì²˜ë¦¬í•©ë‹ˆë‹¤(ì´ë™/ê·¸ë¦¼ì). */
    }
    .pl-card:hover {
      transform: translateY(-2px);
      /* ë§ˆìš°ìŠ¤ê°€ ì˜¬ë¼ê°€ë©´ ì¹´ë“œê°€ ì‚´ì§ ìœ„ë¡œ ë–  ë³´ì´ë„ë¡ ì´ë™í•©ë‹ˆë‹¤. */
      box-shadow: 0 10px 25px rgba(0,0,0,.55);
      /* í˜¸ë²„ ì‹œ ê·¸ë¦¼ìë¥¼ ê¹Šê²Œ í•˜ì—¬ ë¶€ê°ì‹œí‚µë‹ˆë‹¤. */
    }

    /* ì¬ìƒëª©ë¡ ì‚­ì œ ë²„íŠ¼ (í˜¸ë²„ ì‹œ ë…¸ì¶œ) */
    .pl-delete-btn {
      position: absolute;
      /* ë¶€ëª¨(.pl-card)ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì ˆëŒ€ ìœ„ì¹˜í•©ë‹ˆë‹¤. */
      bottom: 6px;
      /* ì¹´ë“œ í•˜ë‹¨ìœ¼ë¡œë¶€í„° 6px ìœ„ì— ìœ„ì¹˜í•©ë‹ˆë‹¤. */
      right: 8px;
      /* ì¹´ë“œ ì˜¤ë¥¸ìª½ì—ì„œ 8px ë–¨ì–´ì§„ ìœ„ì¹˜ì— ë°°ì¹˜í•©ë‹ˆë‹¤. */
      padding: 4px 6px;
      /* ë²„íŠ¼ì˜ ë‚´ë¶€ ì—¬ë°±ì„ ìœ„/ì•„ë˜ 4px, ì¢Œ/ìš° 6pxë¡œ ì„¤ì •í•©ë‹ˆë‹¤. */
      font-size: 13px;
      /* ë²„íŠ¼ í…ìŠ¤íŠ¸ í¬ê¸°ë¥¼ 13pxë¡œ ì„¤ì •í•©ë‹ˆë‹¤. */
      border-radius: 999px;
      /* ë‘¥ê·¼ ëª¨ì„œë¦¬(ì™„ì „ ì›í˜•ì— ê°€ê¹Œìš´ í˜•íƒœ)ë¥¼ ë§Œë“­ë‹ˆë‹¤. */
      border: none;
      /* ê¸°ë³¸ í…Œë‘ë¦¬ë¥¼ ì œê±°í•©ë‹ˆë‹¤. */
      background: rgba(255, 80, 80, 0.9);
      /* ë¶‰ì€ìƒ‰ ê³„ì—´ì˜ ë°°ê²½ì„ ì£¼ì–´ ì‚­ì œ ë²„íŠ¼ì„ì„ ì‹œê°ì ìœ¼ë¡œ í‘œì‹œí•©ë‹ˆë‹¤. */
      color: #fff;
      /* ë²„íŠ¼ í…ìŠ¤íŠ¸ ìƒ‰ìƒì„ í°ìƒ‰ìœ¼ë¡œ ì„¤ì •í•©ë‹ˆë‹¤. */
      cursor: pointer;
      /* í´ë¦­ ê°€ëŠ¥í•œ ìš”ì†Œì„ì„ ë‚˜íƒ€ë‚´ëŠ” í¬ì¸í„°ë¡œ ë³€ê²½í•©ë‹ˆë‹¤. */
      opacity: 0;                 /* ê¸°ë³¸ì€ ìˆ¨ê¹€ */
      /* ê¸°ë³¸ì ìœ¼ë¡œ ë³´ì´ì§€ ì•Šê²Œ í•©ë‹ˆë‹¤. */
      transform: translateY(4px); /* ì‚´ì§ ë‚´ë ¤ê°€ ìˆê²Œ */
      /* ì‹œê°ì ìœ¼ë¡œ ë²„íŠ¼ì´ ì•„ë˜ì— ìˆëŠ” ê²ƒì²˜ëŸ¼ ì‹œì‘ ìœ„ì¹˜ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. */
      transition: opacity .15s ease, transform .15s ease;
      /* í‘œì‹œ/ìˆ¨ê¹€ê³¼ ì´ë™ ì „í™˜ì„ ë¶€ë“œëŸ½ê²Œ ì²˜ë¦¬í•©ë‹ˆë‹¤. */
      z-index: 5;                 /* ì¬ìƒ hover ìœ„ì— ì˜¬ë¼ì˜¤ê²Œ */
      /* ë‹¤ë¥¸ ìš”ì†Œë³´ë‹¤ ìœ„ì— í‘œì‹œë˜ë„ë¡ z-indexë¥¼ ë†’ì…ë‹ˆë‹¤. */
      pointer-events: none;       /* ê¸°ë³¸ì€ í´ë¦­ ì•ˆ ë¨ (í˜¸ë²„ ë•Œ ì¼œì§) */
      /* ê¸°ë³¸ì ìœ¼ë¡œ í´ë¦­ ë¶ˆê°€ ìƒíƒœë¡œ ë‘ì–´ í˜¸ë²„ ì‹œë§Œ í´ë¦­ë˜ë„ë¡ ë§Œë“­ë‹ˆë‹¤. */
    }
    .pl-card:hover .pl-delete-btn {
      opacity: 1;
      /* ì¹´ë“œì— ë§ˆìš°ìŠ¤ë¥¼ ì˜¬ë¦¬ë©´ ë²„íŠ¼ì´ ë³´ì´ë„ë¡ í•©ë‹ˆë‹¤. */
      transform: translateY(0);
      /* ë²„íŠ¼ì„ ì›ìœ„ì¹˜ë¡œ ì´ë™ì‹œì¼œ ìì—°ìŠ¤ëŸ½ê²Œ ë‚˜íƒ€ë‚˜ê²Œ í•©ë‹ˆë‹¤. */
      pointer-events: auto;       /* ì¹´ë“œì— í˜¸ë²„ë˜ë©´ í´ë¦­ ê°€ëŠ¥ */
      /* ì´ì œ í´ë¦­ ì´ë²¤íŠ¸ê°€ ê°€ëŠ¥í•´ì§‘ë‹ˆë‹¤. */
    }
    .pl-delete-btn:hover {
      background: rgba(255, 40, 40, 1);
      /* ë²„íŠ¼ì— ë§ˆìš°ìŠ¤ë¥¼ ì˜¬ë¦¬ë©´ ìƒ‰ì„ ë” ì§„í•˜ê²Œ í•´ì„œ í”¼ë“œë°±ì„ ì¤ë‹ˆë‹¤. */
    }


    /* ì»¤ë²„(ì¸ë„¤ì¼ë“¤ ëª¨ì¸ ì‚¬ê°í˜•) */
    .pl-cover {
  position: relative; /* ë¶€ëª¨ ì»¨í…Œì´ë„ˆ ê¸°ì¤€ ìƒëŒ€ ìœ„ì¹˜ ì§€ì • */
  width: 100%; /* ê°€ë¡œ 100% */
  aspect-ratio: 1/1; /* ì •ì‚¬ê°í˜• ë¹„ìœ¨ ìœ ì§€ */
  border-radius: 12px; /* ë‘¥ê·¼ ëª¨ì„œë¦¬ */
  overflow: hidden; /* ë‚´ë¶€ ë‚´ìš©ì´ ë„˜ì¹˜ë©´ ìˆ¨ê¹€ */
  background: linear-gradient(135deg,#111,#222); /* ê¸°ë³¸ ê·¸ë¼ë°ì´ì…˜ ë°°ê²½ */
  display: grid; /* 2x2 ê·¸ë¦¬ë“œë¡œ êµ¬ì„± */
  grid-template-columns: repeat(2,1fr); /* 2ì—´ ê· ë“± ë¶„í•  */
  grid-template-rows: repeat(2,1fr); /* 2í–‰ ê· ë“± ë¶„í•  */
  gap: 2px; /* ê²©ì ê°„ê²© 2px */
}

.pl-cover img {
  width: 100%; /* ì´ë¯¸ì§€ ê°€ë¡œ 100% */
  height: 100%; /* ì´ë¯¸ì§€ ì„¸ë¡œ 100% */
  object-fit: cover; /* ë¹„ìœ¨ ìœ ì§€í•˜ë©° ì˜ì—­ ì±„ìš°ê¸° */
  display: block; /* ë¸”ë¡ ìš”ì†Œë¡œ í‘œì‹œ */
}

.pl-cover-fallback {
  grid-column: 1 / 3; /* ê°€ë¡œ 2ì¹¸ ëª¨ë‘ ì°¨ì§€ */
  grid-row: 1 / 3; /* ì„¸ë¡œ 2ì¹¸ ëª¨ë‘ ì°¨ì§€ */
  display:flex; /* ì¤‘ì•™ ì •ë ¬ì„ ìœ„í•œ flex */
  align-items:center; /* ì„¸ë¡œ ì¤‘ì•™ ì •ë ¬ */
  justify-content:center; /* ê°€ë¡œ ì¤‘ì•™ ì •ë ¬ */
  font-size:32px; /* ê¸€ì í¬ê¸° */
  opacity:.6; /* ë°˜íˆ¬ëª… */
}


    /* hover ì¬ìƒ ë²„íŠ¼ */
.pl-play-hover {
  position:absolute; /* ë¶€ëª¨ ê¸°ì¤€ ì ˆëŒ€ ìœ„ì¹˜ */
  inset:0; /* ìƒí•˜ì¢Œìš° 0ìœ¼ë¡œ ì „ì²´ ë®ê¸° */
  display:flex; /* ì¤‘ì•™ ì •ë ¬ì„ ìœ„í•œ flex */
  align-items:center; /* ì„¸ë¡œ ì¤‘ì•™ ì •ë ¬ */
  justify-content:center; /* ê°€ë¡œ ì¤‘ì•™ ì •ë ¬ */
  background:linear-gradient(135deg,rgba(0,0,0,.0),rgba(0,0,0,.45)); /* ìœ„ì—ì„œ ì•„ë˜ë¡œ ê·¸ë¼ë°ì´ì…˜ ì˜¤ë²„ë ˆì´ */
  opacity:0; /* ì´ˆê¸°ì—ëŠ” ìˆ¨ê¹€ */
  transition:opacity .15s ease, transform .15s ease; /* ë¶€ë“œëŸ¬ìš´ í‘œì‹œ/í™•ëŒ€ ì• ë‹ˆë©”ì´ì…˜ */
  pointer-events:none; /* ì´ˆê¸°ì—ëŠ” í´ë¦­ ì´ë²¤íŠ¸ ë¬´ì‹œ */
}

.pl-card:hover .pl-play-hover {
  opacity:1; /* ì¹´ë“œ í˜¸ë²„ ì‹œ í‘œì‹œ */
  transform:scale(1.02); /* ì‚´ì§ í™•ëŒ€ */
  pointer-events:auto; /* í´ë¦­ ê°€ëŠ¥ */
}

.pl-play-btn {
  width:56px; /* ë²„íŠ¼ ê°€ë¡œ */
  height:56px; /* ë²„íŠ¼ ì„¸ë¡œ */
  border-radius:50%; /* ì›í˜• ë²„íŠ¼ */
  border:none; /* í…Œë‘ë¦¬ ì œê±° */
  display:flex; /* ì•„ì´ì½˜ ì¤‘ì•™ ì •ë ¬ */
  align-items:center; /* ì„¸ë¡œ ì¤‘ì•™ */
  justify-content:center; /* ê°€ë¡œ ì¤‘ì•™ */
  background:var(--accent, #1ed760); /* ê¸°ë³¸ ë…¹ìƒ‰ ê°•ì¡°ìƒ‰ */
  font-size:24px; /* ì•„ì´ì½˜ í¬ê¸° */
  cursor:pointer; /* ë§ˆìš°ìŠ¤ í¬ì¸í„° ë³€ê²½ */
}

.pl-meta-title {
  font-weight:600; /* ì œëª© ë‘ê»ê²Œ */
  font-size:16px; /* ì œëª© í¬ê¸° */
}

.pl-meta-sub {
  font-size:12px; /* ë¶€ì œëª© í¬ê¸° */
  opacity:.7; /* ë°˜íˆ¬ëª… */
}


    /* ê³µìœ  ì¬ìƒëª©ë¡ ë¦¬ìŠ¤íŠ¸ */
.pl-public-row {
  display:flex; /* í–‰ ë ˆì´ì•„ì›ƒ */
  gap:10px; /* í•­ëª© ê°„ê²© */
  align-items:center; /* ì„¸ë¡œ ì¤‘ì•™ ì •ë ¬ */
  padding:8px 0; /* ìœ„ì•„ë˜ ì—¬ë°± */
  border-bottom:1px solid rgba(255,255,255,.04); /* ì•„ë˜ êµ¬ë¶„ì„  */
  cursor:pointer; /* ë§ˆìš°ìŠ¤ í¬ì¸í„° ë³€ê²½ */
}

.pl-public-thumb {
  width:56px; /* ì¸ë„¤ì¼ ê°€ë¡œ */
  height:56px; /* ì¸ë„¤ì¼ ì„¸ë¡œ */
  border-radius:8px; /* ëª¨ì„œë¦¬ ë‘¥ê¸€ê²Œ */
  background:#111; /* ê¸°ë³¸ ë°°ê²½ìƒ‰ */
  overflow:hidden; /* ë‚´ìš© ë„˜ì¹¨ ìˆ¨ê¹€ */
  flex-shrink:0; /* ì¶•ì†Œ ë°©ì§€ */
  display:grid; /* 2x2 ê·¸ë¦¬ë“œ */
  grid-template-columns:repeat(2,1fr); /* ì—´ 2ì¹¸ */
  grid-template-rows:repeat(2,1fr); /* í–‰ 2ì¹¸ */
  gap:1px; /* ê·¸ë¦¬ë“œ ê°„ê²© */
}

.pl-public-thumb img {
  width:100%; 
  height:100%; 
  object-fit:cover; /* ì´ë¯¸ì§€ ì˜ì—­ ì±„ìš°ê¸° */
}

.badge-pill {
  border-radius:999px; /* ë‘¥ê·¼ ë°°ì§€ */
  padding:2px 8px; /* ì•ˆìª½ ì—¬ë°± */
  font-size:11px; /* ê¸€ì í¬ê¸° */
  background:rgba(255,255,255,.08); /* ë°˜íˆ¬ëª… ë°°ê²½ */
}
  </style>
</head>
<body data-mood="calm" data-auth-required="playlist"> <!-- í˜ì´ì§€ ë°”ë””, ê°ì •/ê¶Œí•œ ì†ì„± -->

<header class="topbar">
  <div class="brand">ğŸ“‚ ì¬ìƒëª©ë¡</div> <!-- ìƒë‹¨ ë¸Œëœë“œ ë¡œê³ /í…ìŠ¤íŠ¸ -->
  <nav class="nav">
    <!-- ìƒë‹¨ ë‚´ë¹„ê²Œì´ì…˜ ë©”ë‰´ -->
    <a href="./home.html" class="btn">í™ˆ</a>
    <!-- í™ˆ í˜ì´ì§€ë¡œ ì´ë™í•˜ëŠ” ë§í¬ì…ë‹ˆë‹¤. -->
    <a href="./search.html" class="btn">ê²€ìƒ‰</a>
    <!-- ê²€ìƒ‰ í˜ì´ì§€ë¡œ ì´ë™í•˜ëŠ” ë§í¬ì…ë‹ˆë‹¤. -->
    <a href="./playlist.html" class="btn">ë‚´ ì¬ìƒëª©ë¡</a>
    <!-- í˜„ì¬ í˜ì´ì§€(ë‚´ ì¬ìƒëª©ë¡)ë¡œ ì—°ê²°ë˜ëŠ” ë§í¬ì…ë‹ˆë‹¤. -->
    <a href="./login.html" id="loginLink" class="btn">ë¡œê·¸ì¸</a>
    <!-- ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™í•˜ëŠ” ë§í¬ì…ë‹ˆë‹¤. ë¡œê·¸ì¸ ìƒíƒœì— ë”°ë¼ ìˆ¨ê¸°ê±°ë‚˜ êµì²´ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. -->
    <span id="userBadge" class="badge hidden"></span> <!-- ë¡œê·¸ì¸ ì‚¬ìš©ì ì´ë¦„ í‘œì‹œ -->
    <!-- ë¡œê·¸ì¸ëœ ì‚¬ìš©ìì˜ ì´ë¦„ì´ë‚˜ ë‹‰ë„¤ì„ì„ í‘œì‹œí•˜ëŠ” ë°°ì§€ ìš”ì†Œ(ì´ˆê¸°ì—” hiddenìœ¼ë¡œ ìˆ¨ê¹€) -->
    <button id="logoutBtn" class="btn hidden">ë¡œê·¸ì•„ì›ƒ</button> <!-- ë¡œê·¸ì¸ ì‹œ í™œì„±í™” -->
    <!-- ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼(ì´ˆê¸°ì—ëŠ” ìˆ¨ê¹€). ë¡œê·¸ì¸ ìƒíƒœë©´ ë³´ì´ê³ , í´ë¦­ ì‹œ ë¡œê·¸ì•„ì›ƒ ì´ë²¤íŠ¸ê°€ ë°œìƒí•´ì•¼ í•©ë‹ˆë‹¤. -->
  </nav>
</header>

<main style="padding:16px;display:flex;flex-direction:column;gap:24px"> <!-- ë©”ì¸ ì½˜í…ì¸  ì˜ì—­, ì„¸ë¡œ ë ˆì´ì•„ì›ƒ, í•­ëª© ê°„ê²© -->
  <!-- ì—¬ê¸°ì„œë¶€í„° ì‹¤ì œ í˜ì´ì§€ ì½˜í…ì¸ (ë‚´ ì¬ìƒëª©ë¡ ëª©ë¡, ê³µìœ  ëª©ë¡ ë“±)ë¥¼ êµ¬ì„±í•˜ëŠ” ìš”ì†Œë“¤ì´ ë“¤ì–´ê°‘ë‹ˆë‹¤. -->
</main>
</body>
</html>


  <!-- ë‚´ ì¬ìƒëª©ë¡ (ê°€ë¡œ ìŠ¤í¬ë¡¤ ì²« ì¤„) -->
  <section class="panel">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;gap:12px">
      <div class="title">ë‚´ ì¬ìƒëª©ë¡</div>
      <div style="display:flex;gap:8px;align-items:center">
        <input id="plTitle"
              placeholder="ì¬ìƒëª©ë¡ ì´ë¦„"
              style="padding:8px 10px;border-radius:999px;min-width:180px;
                      background:var(--card);color:var(--text);
                      border:1px solid rgba(255,255,255,.16)"/>

        <!-- ğŸ¨ ì¬ìƒëª©ë¡ ìƒ‰ ì„ íƒ -->
        <div style="display:flex;align-items:center;gap:6px;font-size:12px;">
          <span class="sub" style="opacity:.8;">í…Œë§ˆ ìƒ‰</span>
          <input id="plColor"
                type="color"
                value="#22d3ee"
                style="width:32px;height:32px;border-radius:50%;border:none;padding:0;cursor:pointer;background:transparent;"/>
        </div>
  <button id="createPL" class="btn primary">ìƒì„±</button>
</div>

    </div>

    <div id="myPlaylistsRow" class="my-playlists-row">
      <!-- JS ë Œë”ë§ -->
    </div>
  </section>

  <!-- ê³µìœ  ì¬ìƒëª©ë¡ (ì•„ë˜, ì„¸ë¡œ ìŠ¤í¬ë¡¤) -->
  <section class="panel" style="max-height:420px;overflow-y:auto;">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:4px">
      <div class="title">ê³µìœ  ì¬ìƒëª©ë¡</div>
      <div style="display:flex;gap:4px">
        <button class="btn" id="sortRecent" data-sort="recent">ìµœì‹ </button>
        <button class="btn" id="sortPopular" data-sort="popular">ì¸ê¸°</button>
      </div>
    </div>

    <div id="publicLists">
      <!-- JS ë Œë”ë§ -->
    </div>
  </section>
</main>

<script src="./assets/api.js"></script>
<script src="./assets/auth.js"></script>
<script>
  // í˜ì´ì§€ ë¡œë“œë˜ìë§ˆì ë¡œê·¸ì¸ ì—¬ë¶€ í™•ì¸
if (window.Auth) {
  Auth.requireLogin('playlist'); // ë¡œê·¸ì¸ í•„ìš” í˜ì´ì§€ì¼ ê²½ìš° ì¸ì¦ ì²´í¬
}

const $ = (s) => document.querySelector(s); // ê°„ë‹¨í•œ ì„ íƒì í•¨ìˆ˜

function buildCoverThumbs(items) {
  // ìµœëŒ€ 4ê°œì˜ ì¸ë„¤ì¼ ì´ë¯¸ì§€ ì¶”ì¶œ
  // items ë°°ì—´ì—ì„œ ì¸ë„¤ì¼ë§Œ ë½‘ì•„ ìµœëŒ€ 4ê°œë¡œ ì œí•œí•˜ëŠ” ìœ í‹¸ í•¨ìˆ˜
  const thumbs = (items || [])
    .map(t => t.thumb) // thumb ì†ì„±ë§Œ ì¶”ì¶œ
    .filter(Boolean)   // null/undefined ì œê±°
    .slice(0, 4);     // ìµœëŒ€ 4ê°œ
  return thumbs;
}

function goPlaylistDetail(id) {
  // íŠ¹ì • ì¬ìƒëª©ë¡ ìƒì„¸ í˜ì´ì§€ë¡œ ì´ë™
  // ì¬ìƒëª©ë¡ ì•„ì´ë””ë¥¼ ì¿¼ë¦¬ìŠ¤íŠ¸ë§ì— ì•ˆì „í•˜ê²Œ ë„£ì–´ í˜ì´ì§€ ì „í™˜
  location.href = `./playlist_view.html?id=${encodeURIComponent(id)}`;
}

async function renderMy() {
  const row = $('#myPlaylistsRow'); // ë‚´ ì¬ìƒëª©ë¡ ì»¨í…Œì´ë„ˆ ì„ íƒ
  row.innerHTML = ''; // ì´ˆê¸°í™”

  try {
    const res = await API.playlists(); // ì„œë²„ì—ì„œ ë‚´ ì¬ìƒëª©ë¡ ê°€ì ¸ì˜¤ê¸°
    console.log('â–¶ /api/playlists ê²°ê³¼:', res); // ë””ë²„ê¹…ìš©
    const items = res.items || [];

    if (!items.length) {
      // ì¬ìƒëª©ë¡ì´ ì—†ì„ ê²½ìš° ì•ˆë‚´ ë©”ì‹œì§€
      // ì‚¬ìš©ìì—ê²Œ ìƒì„± ìœ ë„ ë¬¸êµ¬ë¥¼ í‘œì‹œ
      row.innerHTML =
        '<div class="sub" style="opacity:.7;padding:4px 8px;">ì•„ì§ ë§Œë“  ì¬ìƒëª©ë¡ì´ ì—†ìŠµë‹ˆë‹¤. ì˜¤ë¥¸ìª½ì—ì„œ ìƒˆë¡œ ë§Œë“¤ì–´ ë³´ì„¸ìš”.</div>';
      return;
    }

      items.forEach(pl => {
        const card = document.createElement('div');
        card.className = 'pl-card'; // ì¬ìƒëª©ë¡ ì¹´ë“œ ì»¨í…Œì´ë„ˆ
        card.dataset.id = pl.id; // í˜¹ì‹œ ë‚˜ì¤‘ì— ì“¸ ìˆ˜ ìˆìœ¼ë‹ˆ ë„£ì–´ë‘ 

        // ğŸ”¥ ì´ ì¬ìƒëª©ë¡ì˜ ìƒ‰ (ì—†ìœ¼ë©´ ê¸°ë³¸)
        const theme = pl.theme_color || '#22d3ee'; // í…Œë§ˆ ìƒ‰ìƒ, ì—†ìœ¼ë©´ ê¸°ë³¸ ìƒ‰ ì‚¬ìš©
        // ì¹´ë“œ ë°°ê²½ì— ê·¸ë¼ë°ì´ì…˜ì„ ì ìš©í•´ ì‹œê°ì  êµ¬ë¶„ì„ ì¤Œ
        card.style.background = `linear-gradient(135deg, ${theme}25, #020617)`; // ì¹´ë“œ ë°°ê²½ ê·¸ë¼ë°ì´ì…˜
        // í…Œë‘ë¦¬ ìƒ‰ë„ í…Œë§ˆ ìƒ‰ì˜ ë°˜íˆ¬ëª…ìœ¼ë¡œ ì„¤ì •
        card.style.border = `1px solid ${theme}55`; // ì¹´ë“œ í…Œë‘ë¦¬ ìƒ‰ìƒ

        const thumbs = buildCoverThumbs(pl.items); // ìµœëŒ€ 4ê°œì˜ ì¸ë„¤ì¼ ê°€ì ¸ì˜¤ê¸°
        const cover = document.createElement('div');
        cover.className = 'pl-cover'; // ì¸ë„¤ì¼ ì»¨í…Œì´ë„ˆ

        if (thumbs.length) {
          // ì¸ë„¤ì¼ì´ ìˆì„ ê²½ìš°
          // ê° ì¸ë„¤ì¼ ì´ë¯¸ì§€ë¥¼ img ìš”ì†Œë¡œ ë§Œë“¤ì–´ ì»¤ë²„ì— ì¶”ê°€
          thumbs.forEach(src => {
            const img = document.createElement('img');
            img.src = src; // ì´ë¯¸ì§€ ê²½ë¡œ
            img.alt = 'thumb'; // ëŒ€ì²´ í…ìŠ¤íŠ¸
            cover.appendChild(img);
          });
          // ì¸ë„¤ì¼ì´ 4ê°œ ë¯¸ë§Œì´ë©´ ë‚¨ì€ ì¹¸ì„ ë°°ê²½ divë¡œ ì±„ì›€
          // ì´ë ‡ê²Œ í•˜ë©´ ë ˆì´ì•„ì›ƒì´ ì¼ì •í•˜ê²Œ ìœ ì§€ë¨
          while (cover.childElementCount < 4) {
            const div = document.createElement('div');
            div.style.background = '#111';
            cover.appendChild(div);
          }
        } else {
          // ì¸ë„¤ì¼ ì—†ì„ ê²½ìš° fallback í‘œì‹œ
          // ê¸°ë³¸ ì•„ì´ì½˜ì„ ë³´ì—¬ì¤˜ ë¹ˆ ìƒíƒœë¥¼ í‘œì‹œ
          const fallback = document.createElement('div');
          fallback.className = 'pl-cover-fallback';
          fallback.textContent = 'ğŸµ'; // ìŒì•… ì•„ì´ì½˜
          cover.appendChild(fallback);
        }

        const hover = document.createElement('div');
        // ì¸ë„¤ì¼ ìœ„ì— í‘œì‹œë˜ëŠ” ì¬ìƒ ì˜¤ë²„ë ˆì´ ì˜ì—­
        hover.className = 'pl-play-hover'; // í˜¸ë²„ ì‹œ ì¬ìƒ ë²„íŠ¼ ì˜¤ë²„ë ˆì´
        const playBtn = document.createElement('button');
        // ì¬ìƒ ë²„íŠ¼ ìš”ì†Œ ìƒì„± (ì˜¤ë²„ë ˆì´ ì•ˆì— ë“¤ì–´ê°)
        playBtn.className = 'pl-play-btn'; // ì¬ìƒ ë²„íŠ¼ ìŠ¤íƒ€ì¼
        playBtn.innerHTML = 'â–¶'; // ì¬ìƒ ì•„ì´ì½˜

        // ë²„íŠ¼ ë°°ê²½ë„ ì¬ìƒëª©ë¡ ìƒ‰ìœ¼ë¡œ
        // ì¬ìƒëª©ë¡ì˜ ì‹œê°ì  ì¼ê´€ì„±ì„ ìœ ì§€í•˜ê¸° ìœ„í•¨
        playBtn.style.background = theme;
        hover.appendChild(playBtn);
        // ì˜¤ë²„ë ˆì´ë¥¼ ì¸ë„¤ì¼ ì»¨í…Œì´ë„ˆì— ì¶”ê°€í•˜ì—¬ ë§ˆìš°ìŠ¤ í˜¸ë²„ ì‹œ í‘œì‹œ
        cover.appendChild(hover);


        // ğŸ”¥ ì—¬ê¸°: ì‚­ì œ ë²„íŠ¼ ì¶”ê°€
        deleteBtn.addEventListener('click', async (e) => {
        e.stopPropagation(); // í´ë¦­ ì´ë²¤íŠ¸ ë²„ë¸”ë§ ë°©ì§€
        if (!confirm(`"${pl.title}" ì¬ìƒëª©ë¡ì„ ì‚­ì œí• ê¹Œìš”?`)) return; // ì‚­ì œ í™•ì¸

      try {
        const res = await API.deletePlaylist(pl.id); // API í˜¸ì¶œ: ì¬ìƒëª©ë¡ ì‚­ì œ
        if (res.ok) {
          card.remove(); // ì‚­ì œ ì„±ê³µ ì‹œ ì¹´ë“œ ì œê±°
          if (!row.children.length) {
            // ì¹´ë“œê°€ ì—†ìœ¼ë©´ ì•ˆë‚´ ë©”ì‹œì§€ í‘œì‹œ
            row.innerHTML =
              '<div class="sub" style="opacity:.7;padding:4px 8px;">ì•„ì§ ë§Œë“  ì¬ìƒëª©ë¡ì´ ì—†ìŠµë‹ˆë‹¤. ì˜¤ë¥¸ìª½ì—ì„œ ìƒˆë¡œ ë§Œë“¤ì–´ ë³´ì„¸ìš”.</div>';
          }
        } else {
          alert('ì‚­ì œ ì‹¤íŒ¨: ' + (res.error || 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜')); // ì‹¤íŒ¨ ì•Œë¦¼
        }
      } catch (err) {
        console.warn('â–¶ /api/playlists/:id DELETE ì‹¤íŒ¨:', err); // ì½˜ì†” ë¡œê·¸
        alert('ì¬ìƒëª©ë¡ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.'); // ì˜ˆì™¸ ì²˜ë¦¬
      }
    });

        row.appendChild(card); // ì¹´ë“œ rowì— ì¶”ê°€
      });
    } catch (e) {
  console.warn('â–¶ /api/playlists ì‹¤íŒ¨:', e); // ë‚´ ì¬ìƒëª©ë¡ ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨ ë¡œê·¸

  if (e && (e.status === 401 || e.error === 'login required')) {
    alert('ë¡œê·¸ì¸ í›„ ì´ìš©í•´ ì£¼ì„¸ìš”.');
    location.href = './login.html?redirect=playlist'; // ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™
    return;
  }

  row.innerHTML =
    '<div class="sub" style="color:#f66;">ë‚´ ì¬ìƒëª©ë¡ì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</div>'; // ì˜¤ë¥˜ ë©”ì‹œì§€
}
}

// ê³µê°œ ì¬ìƒëª©ë¡ ë Œë”ë§ í•¨ìˆ˜
async function renderPublic(sort = 'recent') {
  const wrap = $('#publicLists'); // ê³µê°œ ì¬ìƒëª©ë¡ ì»¨í…Œì´ë„ˆ
  wrap.innerHTML = ''; // ì´ˆê¸°í™”

  try {
    const res = await API.publicPlaylists({ sort, limit: 50 }); // ê³µê°œ ì¬ìƒëª©ë¡ API í˜¸ì¶œ
    console.log('â–¶ /api/playlists/public ê²°ê³¼:', res); // ë””ë²„ê¹…
    const items = res.items || [];

    if (!items.length) {
      wrap.innerHTML =
        '<div class="sub" style="opacity:.7;">ê³µê°œ ì¬ìƒëª©ë¡ì´ ì—†ìŠµë‹ˆë‹¤.</div>'; // ì•ˆë‚´ ë©”ì‹œì§€
      return;
    }

    items.forEach(pl => {
      const row = document.createElement('div');
      row.className = 'pl-public-row'; // ê³µê°œ ì¬ìƒëª©ë¡ í–‰

      const thumbBox = document.createElement('div');
      thumbBox.className = 'pl-public-thumb'; // ì¸ë„¤ì¼ ë°•ìŠ¤

      const thumbs = buildCoverThumbs(pl.items); // ì¸ë„¤ì¼ ìµœëŒ€ 4ê°œ
      if (thumbs.length) {
        thumbs.forEach(src => {
          const img = document.createElement('img');
          img.src = src;
          img.alt = 'thumb';
          thumbBox.appendChild(img); // ì¸ë„¤ì¼ ì´ë¯¸ì§€ë¥¼ thumbBoxì— ì¶”ê°€
        });
        while (thumbBox.childElementCount < 4) {
          const d = document.createElement('div');
          d.style.background = '#111'; // ë¹ˆ ì¹¸ ì±„ìš°ê¸°
          thumbBox.appendChild(d);
        }
      } else {
        // ì¸ë„¤ì¼ ì—†ì„ ê²½ìš° fallback
        const d = document.createElement('div');
        d.style.gridColumn = '1/3';
        d.style.gridRow = '1/3';
        d.style.display = 'flex';
        d.style.alignItems = 'center';
        d.style.justifyContent = 'center';
        d.textContent = 'ğŸµ'; // ê¸°ë³¸ ìŒì•… ì•„ì´ì½˜
        thumbBox.appendChild(d);
      }

      const meta = document.createElement('div'); // ë©”íƒ€ ì •ë³´
      meta.style.flex = '1';
      meta.innerHTML = `
        <div class="title" style="font-size:15px;">${pl.title}</div>
        <div class="sub" style="font-size:12px;">
          ${pl.owner_name || 'ìµëª…'} Â· íŠ¸ë™ ${(pl.items || []).length}ê°œ
        </div>
      `; // ì œëª©ê³¼ ì†Œìœ ì ì •ë³´, íŠ¸ë™ ìˆ˜ í‘œì‹œ

      const right = document.createElement('div'); // ì¢‹ì•„ìš” ë° ê³µê°œ ì—¬ë¶€
      right.style.display = 'flex';
      right.style.flexDirection = 'column';
      right.style.alignItems = 'flex-end';
      right.innerHTML = `
        <span class="badge-pill">â™¥ ${pl.likes || 0}</span> <!-- ì¢‹ì•„ìš” ê°œìˆ˜ í‘œì‹œ -->
        <span class="sub" style="font-size:11px;margin-top:4px;">${pl.is_public ? 'ê³µê°œ' : 'ë¹„ê³µê°œ'}</span> <!-- ê³µê°œ ì—¬ë¶€ -->
      `;

      row.appendChild(thumbBox); // ì¸ë„¤ì¼ ì¶”ê°€
      row.appendChild(meta); // ë©”íƒ€ ì •ë³´ ì¶”ê°€
      row.appendChild(right); // ì˜¤ë¥¸ìª½ ì •ë³´ ì¶”ê°€

      row.addEventListener('click', () => {
        goPlaylistDetail(pl.id); // í´ë¦­ ì‹œ ìƒì„¸ í˜ì´ì§€ ì´ë™
      });

      wrap.appendChild(row); // ê³µê°œ ì¬ìƒëª©ë¡ ì¶”ê°€
    });
  } catch (e) {
    console.warn('â–¶ /api/playlists/public ì‹¤íŒ¨:', e); // ì˜¤ë¥˜ ë¡œê·¸
    wrap.innerHTML =
      '<div class="sub" style="color:#f66;">ê³µê°œ ì¬ìƒëª©ë¡ì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</div>'; // ì˜¤ë¥˜ ë©”ì‹œì§€
  }
}

// ì¬ìƒëª©ë¡ ìƒì„±
$('#createPL').addEventListener('click', async () => {
  const input = $('#plTitle'); // ì œëª© ì…ë ¥
  const colorInput = $('#plColor'); // ìƒ‰ìƒ ì…ë ¥
  const title = input.value.trim();
  if (!title) {
    alert('ì¬ìƒëª©ë¡ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”.');
    input.focus(); // ì…ë ¥ë€ì— í¬ì»¤ìŠ¤
    return;
  }

  const themeColor = (colorInput && colorInput.value) ? colorInput.value : '#22d3ee'; // ê¸°ë³¸ í…Œë§ˆ ìƒ‰

  try {
    const res = await API.createPlaylist({ title, isPublic: false, themeColor }); // API í˜¸ì¶œ: ì¬ìƒëª©ë¡ ìƒì„±
    console.log('â–¶ /api/playlists POST ê²°ê³¼:', res);
    input.value = ''; // ì…ë ¥ ì´ˆê¸°í™”
    await renderMy(); // ë‚´ ì¬ìƒëª©ë¡ ë‹¤ì‹œ ë Œë”
  } catch (e) {
    console.warn('â–¶ /api/playlists POST ì‹¤íŒ¨:', e);
    if (e && (e.status === 401 || e.error === 'login required')) {
      alert('ë¡œê·¸ì¸ í›„ ì´ìš©í•´ ì£¼ì„¸ìš”.');
      location.href = './login.html?redirect=playlist'; // ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™
    } else {
      alert('ì¬ìƒëª©ë¡ ìƒì„± ì‹¤íŒ¨: ' + (e?.error ?? 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜')); // ê¸°íƒ€ ì˜¤ë¥˜ ì•Œë¦¼
    }
  }
});

// ê³µê°œ ì¬ìƒëª©ë¡ ì •ë ¬ ë²„íŠ¼ ì´ë²¤íŠ¸
$('#sortRecent').addEventListener('click', () => renderPublic('recent')); // ìµœì‹ ìˆœ ë²„íŠ¼
$('#sortPopular').addEventListener('click', () => renderPublic('popular')); // ì¸ê¸°ìˆœ ë²„íŠ¼

// ì´ˆê¸° ë Œë”ë§
renderMy(); // ë‚´ ì¬ìƒëª©ë¡ ë Œë”ë§
renderPublic('recent'); // ê³µê°œ ì¬ìƒëª©ë¡ ìµœì‹ ìˆœ ë Œë”ë§
